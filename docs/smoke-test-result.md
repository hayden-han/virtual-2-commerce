# Smoke Test 결과 보고서

## 1. 테스트 개요

| 항목 | 내용 |
|-----|------|
| **테스트 대상** | POST /api/v1/orders (주문 API) |
| **테스트 유형** | Smoke Test |
| **테스트 도구** | Grafana k6 v1.4.2 |
| **테스트 목적** | 시스템 기본 동작 확인, Stress Test 사전 검증 |

---

## 2. 테스트 환경

### 2.1 인프라 구성

| 컴포넌트 | 버전 | 설정 |
|---------|------|------|
| Application Server | Spring Boot | localhost:8080 |
| MySQL (Master) | 8.0 | localhost:3306, HikariCP pool-size: 3 |
| MySQL (Slave) | 8.0 | localhost:3307, HikariCP pool-size: 3 |
| Redis | 7-alpine | localhost:6379 |
| Kafka | 7.6.0 | 3 brokers (9092, 9093, 9094) |

### 2.2 테스트 데이터

| 데이터 | 수량 | 설정 |
|-------|------|------|
| 회원 | 10명 (ID: 1~10) | 잔고: 10,000,000원/인 |
| 상품 | 3개 | 가격: 10,000원 ~ 20,000원 |

### 2.3 테스트 설정

```javascript
export const options = {
  vus: 1,              // 1명의 가상 사용자
  duration: '30s',     // 30초 동안 실행
  thresholds: {
    http_req_duration: ['p(95)<3000'],  // 응답 시간 3초 이내
    http_req_failed: ['rate<0.1'],      // 에러율 10% 미만
  },
};
```

---

## 3. 테스트 결과

### 3.1 결과 요약

| 지표 | 결과 | 기준 | 판정 |
|-----|------|------|:----:|
| **성공률** | 100% (14/14) | - | PASS |
| **에러율** | 0% | < 10% | PASS |
| **응답시간 p95** | 951.15ms | < 3000ms | PASS |
| **처리량** | 0.44 req/s | - | - |

### 3.2 상세 메트릭

```
checks..........................: 100.00% ✓ 28       ✗ 0
http_req_duration...............: avg=255.21ms min=49.13ms med=85.19ms max=2.37s p(90)=166.93ms p(95)=951.15ms
http_req_failed.................: 0.00%   ✓ 0        ✗ 14
http_reqs.......................: 14      0.44252/s
iteration_duration..............: avg=2.25s    min=2.05s   med=2.09s   max=4.39s p(90)=2.17s    p(95)=2.95s
```

### 3.3 응답 시간 분포

| 백분위 | 응답 시간 |
|--------|----------|
| min | 49.13ms |
| median | 85.19ms |
| p90 | 166.93ms |
| p95 | 951.15ms |
| max | 2.37s |

---

## 4. 테스트 상세 로그

| 순서 | 시간 | 회원 ID | 상품 ID | 주문 ID | 결과 |
|-----|------|--------|--------|--------|------|
| 1 | 03:10:39 | 5 | 1 | 1 | 성공 |
| 2 | 03:10:44 | 2 | 2 | 2 | 성공 |
| 3 | 03:10:46 | 2 | 3 | 3 | 성공 |
| 4 | 03:10:48 | 7 | 3 | 4 | 성공 |
| 5 | 03:10:50 | 9 | 3 | 5 | 성공 |
| 6 | 03:10:52 | 6 | 2 | 6 | 성공 |
| 7 | 03:10:54 | 3 | 3 | 7 | 성공 |
| 8 | 03:10:56 | 7 | 3 | 8 | 성공 |
| 9 | 03:10:59 | 6 | 3 | 9 | 성공 |
| 10 | 03:11:01 | 6 | 3 | 10 | 성공 |
| 11 | 03:11:03 | 5 | 1 | 11 | 성공 |
| 12 | 03:11:05 | 9 | 2 | 12 | 성공 |
| 13 | 03:11:07 | 6 | 1 | 13 | 성공 |
| 14 | 03:11:09 | 4 | 1 | 14 | 성공 |

---

## 5. 결론

### 5.1 테스트 결과 판정: PASS

Smoke Test가 성공적으로 완료되었습니다. 시스템의 기본 동작이 정상임을 확인했습니다.

### 5.2 확인된 사항

1. **주문 API 정상 동작**: 모든 요청이 성공적으로 처리됨
2. **트랜잭션 처리 정상**: 재고 차감, 잔고 차감, 주문 생성이 정상 동작
3. **분산 락 정상**: Redis 기반 분산 락이 정상 동작
4. **Kafka 연동 정상**: 주문 완료 이벤트가 정상 발행됨

### 5.3 다음 단계

Smoke Test 통과로 Stress Test 진행 조건이 충족되었습니다.
